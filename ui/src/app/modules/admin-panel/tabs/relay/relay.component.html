<div class="row" style="background-color:#FFFFFF">
    <div class="col-12">
        <div class="panel panel-default" style="background-color: white;">
            <div class="panel-heading" *ngIf="$relaysListBk.length == 0" style="height: 40vh;">
                <div class="row">
                    <div class="col-2">
                        <label class="title">Relays</label>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <h6 style="text-align: center;font-weight: 700;">No Data to Display</h6>
                        <p class="regular-text" style="text-align: center">Download the relay to get started</p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-5"></div>
                    <div class="col-2">
                        <!-- <div (click)="fetchDownloadFileName()"
                            style="text-align: center;background: #FFFFFF;border: 1px solid #E5E5E5;box-sizing: border-box;padding: 8px;cursor: pointer;">
                            <span>
                                <img src="assets/images/icons/ps_download.svg" height='20' weight="20" alt="download">
                            </span>
                            <button class="download-btn">Download Relay</button>
                        </div> -->
                        <button class="modal-scs-btn download-btn-constant" [disabled]="disabledDownloadButton" (click)="fetchDownloadFileName()"> Download Relay Installer
                        </button>
                    </div>
                    <div class="col-5"></div>
                </div>
                <div *ngIf="_isDownloadStarted">
                    <p class="title" style="text-align: center;font-size:12px;float: none;">{{downloadMsg}}</p>
                </div>
            </div>
            <div class="panel-heading" *ngIf="$relaysListBk.length>0">
                <div class="row">
                    <div class="col-2">
                        <label class="title"> Relays</label>
                    </div>
                    <div class="col-6"></div>
                    <div class="col-4" style="text-align: center">
                        <div class="row" style="margin-top: 10px;">
                            <div class="col-sm-2"></div>
                            <div class="col-sm-6">
                                <!-- <div (click)="fetchDownloadFileName()"
                                    style="background: #FFFFFF;border: 1px solid #E5E5E5;box-sizing: border-box;padding: 8px;cursor: pointer;">
                                    <span>
                                        <img src="assets/images/icons/ps_download.svg" height='20' weight="20"
                                            alt="download">
                                    </span>
                                    <button class="download-btn">Download Relay</button>
                                </div> -->
                                <button class=" modal-scs-btn download-btn-constant" [disabled]="disabledDownloadButton" (click)="fetchDownloadFileName()">
                                    Download Relay Installer
                                </button>

                            </div>
                            <div class="col-sm-4">
                                <button class="btn btn-filter filter" (click)="relayGrid.openToolPanelModal()" title="Show/Hide Columns">
                                    <img *ngIf="checkAllHidden()" style="width: 16px;height:20px;margin-top:-2px;"
                                        src="assets/images/icons/show.svg">
                                    <img *ngIf="!checkAllHidden()" style="width: 16px;height:20px;margin-top:-2px;"
                                        src="assets/images/icons/hide.svg">
                                </button>
                                <button style="margin-left: 10px;" class="btn btn-filter filter" (click)="relayGrid.showFilters()" title="Advanced Search">
                                    <i class="fa fa-filter"></i>
                                </button>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-2" style="margin-left: -1%;">
                        <label class="container select-all" style="margin-left: 40px;width: 111px;">
                            <input type="checkbox" [(ngModel)]="allItemsSelected" data-md-icheck [disabled]="relaysList.length==0 ||
                            (relaysList | filter: { name: searchQuery, description: searchQuery, oprUuid: searchQuery,
                            relayName: searchQuery,status: searchQuery,version:searchQuery
                    }).length==0" (change)="selectAll(); toggleVisibility();" style="width: 50%; height: 100%;" />
                            <button class="action-btn" *ngIf="markedItems">Unselect All</button>
                            <button class="action-btn" *ngIf="!markedItems">Select All</button>
                            <span class="checkmark"></span>
                        </label>
                    </div>
                    <div class="col-2" style="margin-top: 8px;padding: 0px;margin-left: -1%;">
                        <button [disabled]="getDeleteStatus()" class="action-btn" (click)="deleteRelay()">Delete
                        </button>
                    </div>
                    <div class="col-8" style="text-align: right;">
                        <label class="count" style="margin-left: 98px;">
                            Relays count:
                            {{ (relaysList | filter: {
                            name: searchQuery, description: searchQuery, oprUuid: searchQuery,
                            relayName: searchQuery, status: searchQuery,version:searchQuery
                        }).length }}
                            <i *ngIf="searchQuery" class="fa fa-filter" aria-hidden="true"></i>
                        </label>
                    </div>
                </div>
            </div>
            <div *ngIf="$relaysListBk.length>0" class="panel-body">
                <div class="col-12">
                    <data-table #relayGrid [columnDefs]="relayColumns" [data]="relaysList | filter: {
                            name: searchQuery, description: searchQuery, oprUuid: searchQuery,
                            relayName: searchQuery,status: searchQuery,version:searchQuery
                        }" [colsTag]="'relays-view'" [selectedHeight]="'42vh'">

                        <tableFilter>
                            <ng-template>
                                <td class="filter-row" [width]="getColumnWidth(relayColumns[0])"></td>
                                <td class="filter-row" [width]="getColumnWidth(relayColumns[1])" [hidden]="relayGrid.isHidden('name')">
                                    <input type="text" class="form-control" [(ngModel)]="relayColumns[1].filter" (ngModelChange)="filterData();" />
                                </td>
                                <td class="filter-row" [width]="getColumnWidth(relayColumns[2])" [hidden]="relayGrid.isHidden('description')">
                                    <input type="text" class="form-control" [(ngModel)]="relayColumns[2].filter" (ngModelChange)="filterData();" />
                                </td>
                                <td class="filter-row" [width]="getColumnWidth(relayColumns[3])" [hidden]="relayGrid.isHidden('version')">
                                    <input type="text" class="form-control" [(ngModel)]="relayColumns[3].filter" (ngModelChange)="filterData();" />
                                </td>

                                <td class="filter-row" [width]="getColumnWidth(relayColumns[4])" [hidden]="relayGrid.isHidden('oprUuid')">
                                    <input type="text" class="form-control" [(ngModel)]="relayColumns[4].filter" (ngModelChange)="filterData();" />
                                </td>
                                <td class="filter-row" [width]="getColumnWidth(relayColumns[5])" [hidden]="relayGrid.isHidden('relayName')">
                                    <input type="text" class="form-control" [(ngModel)]="relayColumns[5].filter" (ngModelChange)="filterData();" />
                                </td>
                                <td class="filter-row" [width]="getColumnWidth(relayColumns[6])" [hidden]="relayGrid.isHidden('status')">
                                </td>
                            </ng-template>
                        </tableFilter>
                        <tableRow>
                            <ng-template let-item="item" class="templateClass">
                                <tr class="strip-table">
                                    <td id="checkbox" [width]="getColumnWidth(relayColumns[0])" (click)="$event.stopPropagation();">
                                        <label class="container" style="margin-top:3px;">
                                            <input type="checkbox" [(ngModel)]="item.selected" data-md-icheck
                                                (change)="checkIfAllItemsSelected(); toggleVisibility($event);">
                                            <span class="checkmarkTCP"
                                                [style.outline-color]="!item.selected ? '#BEBEBE' : '#203C66'"></span>
                                        </label>
                                    </td>
                                    <td class="regular-text" [width]="getColumnWidth(relayColumns[1])" [title]="item.name" [hidden]="relayGrid.isHidden('name')" style="max-width: 40px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                                        {{item.name}}
                                    </td>
                                    <td class="regular-text" [width]="getColumnWidth(relayColumns[2])" style="max-width: 30px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;" [hidden]="relayGrid.isHidden('description')" [title]="item.description">
                                        {{item.description | blank}}
                                    </td>
                                    <td class="regular-text" [width]="getColumnWidth(relayColumns[3])" style="max-width: 30px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;" [title]="item.version" [hidden]="relayGrid.isHidden('version')">
                                        {{item.version | blank}}
                                    </td>
                                    <td class="regular-text" [width]="getColumnWidth(relayColumns[4])" style="max-width: 30px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;" [title]="item.oprUuid" [hidden]="relayGrid.isHidden('oprUuid')">
                                        {{item.oprUuid | blank}}
                                    </td>
                                    <td class="regular-text" [style.color]="getColor(item.status)" [width]="getColumnWidth(relayColumns[5])" style="max-width: 30px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;" [hidden]="relayGrid.isHidden('status')" [title]="item.status | titlecase |blank ">
                                        {{item.status | titlecase | blank}}
                                    </td>
                                    <td class="regular-text" [width]="getColumnWidth(relayColumns[6])">
                                        <ng-template #popTemplate>
                                            <div>
                                                <ul style="list-style: none; margin: 0; padding: 0;">
                                                    <li>
                                                        <button class="pop-option" (click)="$event.stopPropagation();editRelay(item);pop.hide()">
                                                            Edit
                                                        </button>
                                                    </li>
                                                    <li>
                                                        <button class="pop-option" *ngIf="item.status.toString().toLowerCase()=='offline'" (click)="$event.stopPropagation();deleteSelectedRelay(item);pop.hide()">
                                                            Delete
                                                        </button>
                                                    </li>
                                                </ul>
                                            </div>
                                        </ng-template>
                                        <button type="button" class="btn-opt" #pop="bs-popover" [popover]="popTemplate" placement="bottom" [outsideClick]="true" (click)="$event.stopPropagation();" (onShown)="closeOldPop(pop)" data-container="body">
                                            <a style="font-size: 1.4rem; letter-spacing: -2px;
                color: #5F5F5F;">...</a>
                                        </button>
                                    </td>
                                </tr>
                            </ng-template>
                        </tableRow>
                    </data-table>
                    <br>
                </div>
            </div>
        </div>
    </div>
</div>