<div class="modal-header" draggableModal>
    <label class="modal-title">Phone Timeline</label>
    <button type="button" class="close" aria-label="Close" (click)="hideModal()">
        <span aria-hidden="true">&times;</span>
    </button>
</div>
<div class="modal-body">
    <div class="mycontainer">
        <div class="row">
            <div class="col-md-3">
                <div class="form-group">
                    <label for="events" class="form-label">Show on timeline</label>
                    <select [(ngModel)]="selectedEvent" name="events" (change)="filterEvents()" id="event" class="form-control">
                        <option selected value="all">All Events</option>
                        <option *ngFor="let event of eventTypes" value="{{event}}">{{event | titlecase}}</option>
                    </select>
                </div>
            </div>
            <div class="col-md-3">
                <div class="form-group">
                    <label for="from" class="form-label">Date Range</label>
                    <input type="text" [(ngModel)]="rangePickerValue" placeholder="Select Dates" class="form-control" bsDaterangepicker [bsConfig]="{ showWeekNumbers:false, adaptivePosition: true, isAnimated:true, containerClass: 'theme-blue', rangeInputFormat: 'MM/DD/YYYY'}"
                        [minDate]="minDate" [maxDate]="maxDate" (bsValueChange)="selectedDates($event); ">
                </div>
            </div>
            <div class="col-md-2">
                <div class="form-group">
                    <label class="form-label"></label>
                    <button class="form-control btn-download" (click)="clearDates()">Clear Date</button>
                </div>
            </div>
            <div class="col-md-2">
                <div class="form-group">
                    <label for="detailedView" class="form-label btn-download" style="margin-top:38px;">
                        <input name="detailedView" type="checkbox" [(ngModel)]="detailed">&nbsp;Detailed View</label>
                </div>
            </div>
            <div class="col-md-2">
                <div class="form-group">
                    <label class="form-label"></label>
                    <button class="form-control btn-download" (click)="downloadEvents();">Download</button>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-3">
                <div class="form-group" style="text-align: center">
                    <!-- <img src="assets/images/phone.png" class="phone-img"> -->
                    <img [src]="imgSrc" class="phone-img">
                </div>
                <div class="form-group" style="text-align: center">
                    <label class="form-label">Phone Name:</label>
                    <p class="form-label">{{phone.name}}</p>
                    <label class="form-label">User:</label>
                    <p class="form-label">{{phone.primaryUser | na}}</p>
                    <label class="form-label">Extension:</label>
                    <p class="form-label">{{phone.primaryExtension |na}}</p>
                </div>
            </div>
            <div class="col-md-9 ">
                <div class="lifeline-container">
                    <spinner-div #spinner [visible]="showSpinner"></spinner-div>
                    <div class="lifeline-panel" *ngIf="!showSpinner">
                        <div class="events">
                            <timeline-event *ngFor="let event of events; let i = index" [index]="i" [event]="event" [colorsData]="defaultColors" [detailed]="detailed" [lastIndex]="events.length">
                            </timeline-event>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-3"></div>
            <div class="col-md-3">
                <label class="form-label">Viewing {{startDate | date:'MM/dd/yyyy'}} - {{endDate | date:'MM/dd/yyyy'}}
                </label>
            </div>
            <div class="col-md-5">
                <i *ngFor="let type of eventLegends" class="fa fa-circle circle-menu" style="margin-left:5px;" (click)="openColorPopup(type)" [style.color]="getColor(type)" aria-hidden="true">
                    &nbsp;<label class="form-label">{{type | titlecase}}</label>
                </i>
                <div *ngIf="isPopupOpen">
                    <color-twitter [color]="defaultColor" [triangle]="'top-left'" [colors]="pickupColors" [currentColor]="getColor(selectedEvent)" (onChangeComplete)="changeColor($event)"></color-twitter>
                </div>
            </div>
            <div *ngIf="isPopupOpen" class="col-1" style="margin-left: -15%;margin-top: 6%;padding-left: 2% !important;">
                <span class="color-close-btn" (click)="saveDefaultColorsToLocal()">Save</span>
            </div>
            <div class="col-1" *ngIf="isPopupOpen" style="margin-left: -8%;margin-top: 8%;">
                <span class="color-close-btn" (click)="closeColorPopup()">Close</span>
            </div>
        </div>
    </div>
</div>
<div class="modal-footer">
    <div class="form-group">
        <button class="modal-scs-btn" (click)="hideModal()">
            Close
        </button>
    </div>
</div>